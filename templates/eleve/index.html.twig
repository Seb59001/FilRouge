{% extends 'base.html.twig' %}

{% block title %}Les Eleves
{% endblock %}

{% block body %}

	<div class="container">
		<div class="mcw">
			<div class="inbox">
				<div class="inbox-bx container-fluid">
					<div class="row">
						<div class="col-md-10">
							<h1>Les élèves</h1>
							{% if app.user.roles == ['ROLE_ADMIN', 'ROLE_USER' ] %}
								<a href="{{ path ('new_eleve') }}" id="abtn" class="btn btn-primary">Inscrire un nouvel élève</a>
								<a href="#" id="affect-btn" class="btn btn-primary">Gestion cour Eleve</a>
							{% endif %}

							{% for message in app.flashes('success') %}
								<div class="alert alert-success mt-4">
									{{ message }}
								</div>

							{% endfor %}

							<table class="table table-hover mt-4">
								<thead>
									<tr>
										<th><input class="class-checkboxes" type="checkbox" id="select-all" name="select-all"/></th>
										<th scope="col">Nom</th>
										<th scope="col">Prenom</th>
										<th scope="col">Telephone</th>
										<th scope="col">Sexe</th>
										<th scope="col">Niveau d'étude</th>
										<th scope="col">Adresse mail</th>
										<th scope="col">Cours</th>
										{% if app.user.roles == ['ROLE_ADMIN', 'ROLE_USER' ] %}
											<th scope="col">Edition</th>
											<th scope="col">Suppression</th>
										{% endif %}
									</tr>
								</thead>
								<tbody>
									{% for eleve in eleves %}
										<tr i class="table-light mt-4">
											<td><input class="class-checkboxes" type="checkbox" name="eleves_id[]" id="eleve{{ eleve.id }}" value="{{ eleve.id }}"/></td>

											<td>{{ eleve.nom }}</td>
											<td>{{ eleve.prenom }}</td>
											<td>{{ eleve.telephone }}</td>
											<td>{{ eleve.sexe }}</td>
											<td>{{ eleve.niveauetude }}</td>
											<td>{{ eleve.email }}</td>
											<td>
												<ul>
													{% if eleve.cours is not null %}
														{% for cours in eleve.cours %}
															<li>{{ cours.libeleeCour }}</li>
														{% endfor %}
													{% else %}
														<li>Aucun</li>
													{% endif %}

												</ul>
											</td>
											{% if app.user.roles == ['ROLE_ADMIN', 'ROLE_USER' ] %}
												<td>
													<a href="{{ path('edit_eleve', {id: eleve.id}) }}" class="btn btn-warning">Modifier</a>
												</td>
												<td>
													<a href="{{ path('delete_eleve', {id: eleve.id}) }}" class="btn btn-danger">Supprimer</a>
												</td>
											{% endif %}
										</tr>

									{% endfor %}
									<input type="hidden" name="page" value="{{ page }}"/>

								</tbody>
							</table>
							<div class="navigation">
								{{ knp_pagination_render(eleves) }}
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
{% block javascripts %}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="{{ asset('assets/js/eleve.js') }}"></script>
{% endblock %}
